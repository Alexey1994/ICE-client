Клиент формирует запрос Allocate следующим образом:

Клиент сначала выбирает транспортный адрес хоста. РЕКОМЕНДОВАНО, что клиент выбирает в настоящее время неиспользуемый транспортный адрес, как правило, позволяя базовой ОС выбирать текущий неиспользуемый порт для нового сокета.

Затем клиент выбирает транспортный протокол для использования между клиентом и сервером. Транспортный протокол ДОЛЖЕН быть одним из UDP, TCP или TLS-over-TCP. Поскольку эта спецификация разрешает только UDP между сервером и одноранговыми узлами, РЕКОМЕНДУЕТ, чтобы клиент выбрал UDP, если у него нет причин использовать другой транспорт. Одной из причин выбора другого транспорта было бы то, что клиент полагает, либо посредством конфигурации, либо путем эксперимента, что он не может связаться с любым сервером TURN с использованием UDP.

Клиент также выбирает транспортный адрес сервера, который ДОЛЖЕН быть выполнен следующим образом. Клиент получает (возможно, через конфигурацию) доменное имя для сервера TURN. Затем клиент использует процедуры DNS, описанные в [RFC5389], но используя сервисное имя SRV «turn» (или «turn» для TURN over TLS) вместо «оглушения» (или «оглушения»). Например, чтобы найти серверы в домене example.com, клиент выполняет поиск «_turn._udp.example.com», «_turn._tcp.example.com» и «_turns._tcp.example.com», если клиент хочет связываться с сервером, используя UDP, TCP или TLS-over-TCP, соответственно.

Клиент должен ДОЛЖЕН включать в запрос атрибут REQUESTED-RANSPORT. Этот атрибут указывает транспортный протокол между сервером и одноранговыми узлами (обратите внимание, что это НЕ транспортный протокол, который появляется в 5-кортеже). В этом описании тип REQUESTED-RANSPORT всегда является UDP. Этот атрибут включен, чтобы позволить будущим расширениям указывать другие протоколы.

Если клиент желает, чтобы сервер инициализировал поле распределения времени до истечения срока действия до некоторого значения, отличного от времени жизни по умолчанию, тогда он МОЖЕТ включать атрибут LIFETIME, задающий его требуемое значение. Это всего лишь запрос, и сервер может выбрать другое значение. Обратите внимание, что сервер будет игнорировать запросы для инициализации поля до значения, не превышающего значение по умолчанию.

Если клиент хочет позже использовать атрибут DONT-FRAGMENT в одном или нескольких показаниях отправки в этом распределении, тогда клиент ДОЛЖЕН включать атрибут DONT-FRAGMENT в запросе Allocate. Это позволяет клиенту проверить, поддерживается ли этот атрибут сервером.

Если клиент требует, чтобы номер порта ретранслируемого транспортного адреса был четным, клиент включает атрибут EVEN-PORT. Если этот атрибут не включен, порт может быть четным или нечетным. Установив бит R в атрибуте EVEN-PORT равным 1, клиент может запросить, чтобы сервер зарезервировал следующий самый высокий номер порта (на том же IP-адресе) для последующего выделения. Если бит R равен 0, такой запрос не выполняется.

Клиент МОЖЕТ также включать в запрос атрибут RESERVATION-TOKEN, чтобы попросить сервер использовать ранее зарезервированный порт для распределения. Если атрибут RESERVATION-TOKEN включен, клиент должен ДОЛЖЕН пропустить атрибут EVEN-PORT.

После создания клиент отправляет запрос Allocate на 5-кортеж.